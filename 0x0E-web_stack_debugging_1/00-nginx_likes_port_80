#!/usr/bin/env bash
# This script configures Nginx to listen on port 80 of all active IPv4 IPs

# Install netcat for network diagnostics
sudo apt-get update
sudo apt-get install -y netcat

# Check if Nginx is listening on port 80
if sudo netstat -tuln | grep -q ':80'; then
    echo "Nginx is already listening on port 80"
else
    # Modify Nginx configuration to listen on port 80
    sudo sed -i '/listen 80 default_server;/c\    listen 80 default_server;' /etc/nginx/sites-available/default
    sudo sed -i '/listen \[::\]:80 default_server;/c\    listen [::]:80 default_server;' /etc/nginx/sites-available/default

    # Restart Nginx
    sudo systemctl restart nginx

    echo "Nginx configured to listen on port 80"
fi

